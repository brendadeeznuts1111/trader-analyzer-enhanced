name = "trader-analyzer-api"
main = "worker.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

[build]
command = "bun run build:worker"

# Environment variables
[vars]
NODE_ENV = "production"

# Optional: Add D1 database binding (uncomment when ready)
# [[d1_databases]]
# binding = "DB"
# database_name = "trader-analyzer-db"
# database_id = ""

# KV namespace for markets caching
[[kv_namespaces]]
binding = "ORCA_MOCK_CACHE"
id = "your-kv-namespace-id"  # Replace with actual namespace ID from dashboard
preview_id = "your-kv-preview-id"  # Replace with actual preview ID

# Optional: Add Durable Objects for WebSocket (uncomment when ready)
# [[durable_objects.bindings]]
# name = "WS_HANDLER"
# class_name = "WebSocketHandler"

# [migrations]
# tag = "v1" # Should be unique for each deployment

# Development settings
[dev]
port = 8787
local_protocol = "http"

# Production deployment
[deploy]
# Workers are deployed globally by default
# Add custom domains here if needed
# routes = [
#   { pattern = "api.trader-analyzer.com/*", zone_id = "your-zone-id" }
# ]